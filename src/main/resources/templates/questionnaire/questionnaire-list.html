<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru">
<head>
    <style>
        .form-control.is-valid:focus, .was-validated :valid.form-control {
            border-color: inherit !important;
            background-image: inherit !important;
            box-shadow: inherit !important;
        }

    </style>
    <meta charset="utf-8"/>
    <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
    <meta content="" name="description"/>
    <meta content="" name="author"/>
    <link href="/img/caret-down-square-fill.svg" rel="icon" type="image/x-icon">
    <title>Список опросников</title>
    <link href="https://cdn.jsdelivr.net/npm/simple-datatables@latest/dist/style.css" rel="stylesheet"/>
    <link href="/styles/styles.css" rel="stylesheet"/>
    <script crossorigin="anonymous" src="https://use.fontawesome.com/releases/v6.1.0/js/all.js"></script>
    <script crossorigin="anonymous" integrity="sha384-7aHh9lqPYGYZ7sTHvzP1t3BAfLhYSTy9ArHdP3Xsr9/3TlGurYgcPBoFmXX2TX/w"
            src="https://unpkg.com/htmx.org@1.8.5"></script>
</head>

<body class="sb-nav-fixed">

<header th:insert="fragments/headerNavPanel :: headerNavPanel" ></header>


<div id="layoutSidenav">

    <div id="layoutSidenav_nav" th:insert="fragments/leftNavPanel :: leftNavPanel" ></div>

    <div id="layoutSidenav_content">
        <main>
            <div class="container-fluid px-4">
                <h1 class="mt-4">Опросники</h1>

                <div class="card mb-4">
                    <div class="card-header">
                        <i class="fas fa-table me-1"></i>
                        Список опросников
                    </div>
                    <div class="card-body">

                        <div class="input-group mb-3" id="searchQuestionnairesFilterForm">

                            <div class="mt-3 mb-3 w-75 me-auto" id="titleFilter">
                                <input aria-describedby="basic-addon2"
                                           class="form-control"
                                           placeholder="Название"
                                           style="border-color:inherit" type="text">
                            </div>

                            <div class="input-group mb-3 mt-3 w-auto" id="orderTypeFilter">
                                <div class="input-group-prepend w-auto float-md-end">
                                    <label class="input-group-text" for="inputGroupSelect01">Сортировка:</label>
                                </div>
                                <select class="custom-select w-auto float-md-end" id="inputGroupSelect01">
                                    <option selected>От А до Я</option>
                                    <option value="1">От Я до А</option>
                                </select>
                            </div>

                        </div>

                        <table class="table table-hover" id="questionnaireTable">
                            <tbody id="questionnaires-list">
                                <td th:each="questionnaire : ${questionnaires}">
                                    <a th:href="@{/questionnaires/{id}(id=${questionnaire.id()})}" th:text="${questionnaire.title}" class="field">questionnaire</a>
                                </td>
                            </tbody>
                        </table>

                        <div hx-swap-oob="true" id="pagination">

                            <ul class="pagination justify-content-center">
                                <div class="pagination">
                                    <li class="page-item"
                                        th:classappend="${(exercises.getPageable().pageNumber == 0) ? 'disabled' : ''}">
                                        <a class="page-link"
                                           hx-select="#exercises-list"
                                           hx-target="#exercises-list"
                                           hx-trigger="click"
                                           style="cursor: pointer"
                                           th:attr="hx-get=@{/exercises/(pageNumber=${exercises.getPageable().pageNumber}, searchDto=${searchDto})}"
                                           th:if="${exercises.getPageable().pageNumber >= 1}"
                                        >Назад</a>
                                    </li>
                                </div>

                                <div class="pagination" hx-swap="outerHTML"
                                     th:each="pageNumber : ${#numbers.sequence(1, exercises.getTotalPages(), 1)}"
                                     th:if="${exercises.totalPages > 0}">
                                    <li class="page-item"
                                        th:classappend="${pageNumber == (exercises.getPageable().pageNumber + 1)} ? ' active' : ''">
                                        <a class="page-link"
                                           hx-select="#exercises-list"
                                           hx-target="#exercises-list"
                                           hx-trigger="click"
                                           style="cursor: pointer"
                                           th:attr="hx-get=@{/exercises/(pageNumber=${pageNumber}, searchDto=${searchDto})}"
                                           th:text="${pageNumber}"></a>
                                    </li>
                                </div>

                                <div class="pagination">
                                    <li class="page-item"
                                        th:classappend="${!(exercises.getPageable().pageNumber < exercises.totalPages) ? 'disabled' : ''}">
                                        <a class="page-link"
                                           hx-select="#exercises-list"
                                           hx-target="#exercises-list"
                                           hx-trigger="click"
                                           style="cursor: pointer"
                                           th:attr="hx-get=@{/exercises/(pageNumber=${exercises.getPageable().pageNumber + 2}, searchDto=${searchDto})}"
                                           th:if="${exercises.getPageable().pageNumber < exercises.totalPages - 1}"
                                        >Вперед</a>
                                    </li>
                                </div>
                            </ul>
                        </div>

                    </div>
                </div>

                <div class="input-group">
                    <button class="btn btn-secondary" id="btnNewExercise" type="button">Новое упражнение</button>
                </div>
            </div>
        </main>
        <footer class="py-4 bg-light mt-auto" th:insert="fragments/footer :: footer"></footer>
    </div>
</div>

<div w3-include-html=""></div>
<script crossorigin="anonymous"
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="/js/scripts.js"></script>
<script crossorigin="anonymous" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js"></script>
<script crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/simple-datatables@latest"></script>
</body>


</html>